# 6 리액트 훅

## Hooks

- **useState**

  1. getter: 읽기 전용의 속성
  2. setter: 상태를 변경할 때 사용하는 함수
  3. StateType: 상태 데이터의 타입
  4. initialValue: 상태 초깃값 <br />
     `const [getter, setter] = useState<StateType>(initialValue)`

- **useEffect**

  1. componenetDidUpdate, componenetDidMount, componentWillUnMount 생명주기 메서드의 기능 제공
  2. effectCallback: 필수로 작성해야 하는 함수, 클린업 함수를 리턴
  3. depsList: 선택적으로 전달하는 의존 객체 배열 값
  4. 한 컴포넌트 내부에서 useEffect 훅을 여러 개 사용할 수 있으며, 상태와 상태 관련 로직을 중심으로 useEffect 훅을 작성할 수 있어서 관련된 코드들이 함께 모여 있으므로 코드를 이해하기 편리.<br />
     `useEffect(effectCallback[, depsList])`

- **useReducer**

  1. state: 상태
  2. dispatch: 상태를 변경하는 메서드
  3. reducer: 새로운 상태를 리턴 하는 리듀서 함수
  4. initialState: 초기 상태로 지정할 객체
  5. 상태 관리 기능을 컴포넌트로부터 분리할 수 있고, 유사한 상태 관리 기능을 사용하는 여러 컴포넌트가 상태 변경과 관리 기능을 공유할 수 있다.
  6. 불변성을 가지는 상태 변경을 강제하게 되므로 상태 변경을 추적하기 용이. <br />
     `const [state, dispatch] = useReducer(reducer, initialState)`

- **useRef**

  1. useRef 훅을 호출한 뒤 리턴 받은 ref 객체는 컴포넌트의 모든 생명주기 동안에 유지되므로 다시 렌더링 되더라도 기존 참조 데이터를 유지한다. 대신 ref 객체가 참조하는 데이터가 변경되더라도 다시 렌더링이 일어나지 않는다.
  2. initialValue: 참고 객체로 주어질 초깃값 <br />
     `const refObject = useRef(initalValue)`

- **useMemo**

1.  함수가 호출되고 연산된 리턴 값을 캐싱하여 재사용. 캐싱되는 것은 함수를 호출한 후의 리턴 값.
2.  factory: 캐싱할 값을 만들어내는 함수.
3.  depsList: 의존 배열 객체, 이 배열의 값이 바뀌기 전까지는 캐시를 유지. <br />
    `const memoizedValue = useMemo<T>(factory: () => T, depsList)`

- **useCallback**
  1. 컴포넌트 내부의 함수를 캐싱. 렌더링 할 때마다 함수가 생성되지 않게 재사용. 캐싱되는 것은 컴포넌트 내부의 함수.
  2. callback: 캐싱하려는 대상 함수
  3. depsList: 함수를 캐싱할 때 의존 객체 배열, 이 배열의 값에 변화가 없으면 함수를 새로 만들지 않음. <br />
     `const memoizedCallback = useCallback(callback, depsList)`

## 리액트 훅의 생명주기

- **컴포넌트가 마운트 될 때**

| 단계                  | 설명                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 레이지 초기화         | useState()나 useReducer에 전달하는 함수. 이 함수는 비동기로 지연되어 호출. <br /> 일반적인 초기화: `const count = useState<number>(0)` <br /> 레이지 초기화: `const count = useState<number>(() => return 0)` <br /> 레이지 초기화를 실행할 때 인자로 전달되는 함수 내부에서 실행되는 코드는 마운트 될 때만 실행. 상태로 사용할 데이터를 도출하기 위해 복잡한 로직이 필요한 경우 레이지 초기화가 유용. |
| 렌더링                | 함수 컴포넌트의 내부 코드가 실행. 가상 DOM에 대한 쓰기 작업을 수행.                                                                                                                                                                                                                                                                                                                                    |
| 가상 DOM 업데이트     | 가상 DOM 업데이트                                                                                                                                                                                                                                                                                                                                                                                      |
| LayoutEffects 실행    | useLayoutEffect 훅에 지정한 함수를 실행.                                                                                                                                                                                                                                                                                                                                                               |
| 브라우저 DOM 업데이트 | 이 단계가 완료되면 브라우저 화면의 갱신이 완료된 상태.                                                                                                                                                                                                                                                                                                                                                 |
| Effects 실행          | useEffects 훅에 지정한 함수가 호출.                                                                                                                                                                                                                                                                                                                                                                    |

- **컴포넌트가 업데이트 될 때**

| 단계                  | 설명                                                                                                    |
| --------------------- | ------------------------------------------------------------------------------------------------------- |
| 렌더링                | 함수 컴포넌트의 내부 코드가 실행. 가상 DOM에 대한 쓰기 잘업을 수행.                                     |
| 가상 DOM 업데이트     | 가상 DOM 업데이트                                                                                       |
| LayoutEffects 클린업  | useLayoutEffect 훅의 두 번째 인자(의존 객체 배열: despList) 전달 여부에 따라 리턴한 클린업 함수가 호출. |
| LayoutEffects 실행    | useLayoutEffect 훅의 두 번째 인자 전달 여부에 따라 지정한 함수를 실행.                                  |
| 브라우저 DOM 업데이트 | 브라우저 DOM 업데이트                                                                                   |
| Effects 클린업        | useEffect 훅의 두 번째 인자 전달 여부에 따라 리턴한 클린업 함수가 호출.                                 |
| Effects 실행          | useEffect 훅의 두 번째 인자 전달 여부에 따라 지정한 함수를 실행.                                        |

- **컴포넌트가 언마운트 될 때**

| 단계                 | 설명                                             |
| -------------------- | ------------------------------------------------ |
| LayoutEffects 클린업 | useLayoutEffect 훅이 리턴 하는 클린업 함수 호출. |
| Effects 클린업       | useEffect 훅이 리턴 하는 클린업 함수 호출.       |

## useEffect vs useLayoutEffect ?

- useEffect
  - 컴포넌트가 완전히 마운트 된 상황
  - 복잡한 처리 과정, API 읽어올 때 사용
- useLayoutEffect
  - 컴포넌트가 렌더링 되고 브라우저 DOM에서 렌더링이 실행되기 전
  - 간단한 작업, 다시 렌더링으로 인한 화면의 깜빡임을 사용자에게 보여 주고 싶지 않을 때.

## 순수 함수 조건

- 입력 인자가 동일하면 리턴 값도 동일해야 한다.
- 부수 효과 (side effect) 가 없어야 한다.
- 함수에 전달되는 인자는 불변성을 가져야 한다. 따라서 인자를 변경할 수 없다.
